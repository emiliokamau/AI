<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile - Medical AI Assistant</title>
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link href="/static/styles.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #0d6efd;
            --success-color: #198754;
            --danger-color: #dc3545;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f7fa;
        }

        .header {
            background: linear-gradient(135deg, #0d6efd, #0056b3);
            color: white;
            padding: 2rem 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .profile-container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 15px;
        }

        .profile-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            padding: 2rem;
            margin-bottom: 1.5rem;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid #e9ecef;
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, #0d6efd, #0056b3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: white;
            font-weight: bold;
        }

        .profile-info h2 {
            margin: 0;
            color: #212529;
        }

        .profile-info p {
            margin: 0.25rem 0 0 0;
            color: #6c757d;
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: #212529;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .preference-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 4px solid var(--primary-color);
        }

        .preference-item h5 {
            font-size: 1rem;
            margin-bottom: 0.5rem;
            color: #212529;
        }

        .preference-item p {
            font-size: 0.875rem;
            color: #6c757d;
            margin: 0;
        }

        .btn-edit {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.5rem 1.5rem;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .btn-edit:hover {
            background-color: #0b5ed7;
            transform: translateY(-2px);
        }

        .stat-box {
            background: linear-gradient(135deg, #e8f4fd, #f0f8ff);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            border: 1px solid #b3d9ff;
        }

        .stat-box h3 {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .stat-box p {
            color: #6c757d;
            margin: 0;
        }

        .modal-backdrop.show {
            opacity: 0.5;
        }
    </style>
</head>
<body>
    <!-- Alert Container -->
    <div id="alertContainer" style="position: fixed; top: 20px; right: 20px; z-index: 9999; min-width: 300px;"></div>

    <header class="header">
        <div class="container">
            <div class="d-flex align-items-center gap-3">
                <img src="/static/logo.svg" alt="Logo" style="width: 48px; height: 48px;">
                <div>
                    <h1 class="h3 mb-0">My Profile</h1>
                    <p class="mb-0 mt-1">Manage your health profile and preferences</p>
                </div>
            </div>
        </div>
    </header>

    <div class="profile-container">
        <!-- Profile Header -->
        <div class="profile-card">
            <div class="profile-header">
                <div class="profile-avatar" id="profileAvatar">U</div>
                <div class="profile-info flex-grow-1">
                    <h2 id="profileName">Loading...</h2>
                    <p id="profileDetails">Patient Profile</p>
                </div>
                <div>
                    <button class="btn btn-outline-primary" onclick="window.location.href='/dashboard.html'">
                        <i class="bi bi-arrow-left me-2"></i>Back to Dashboard
                    </button>
                </div>
            </div>

            <!-- Stats Row -->
            <div class="row g-3 mb-4">
                <div class="col-md-4">
                    <div class="stat-box">
                        <h3 id="totalSessions">0</h3>
                        <p>Conversations</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="stat-box">
                        <h3 id="lastActive">--</h3>
                        <p>Last Active</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="stat-box">
                        <h3 id="accountAge">--</h3>
                        <p>Member Since</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Personal Information -->
        <div class="profile-card">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h3 class="section-title mb-0">
                    <i class="bi bi-person-badge"></i> Personal Information
                </h3>
                <button class="btn btn-edit" onclick="editPersonalInfo()">
                    <i class="bi bi-pencil me-2"></i>Edit
                </button>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="preference-item">
                        <h5><i class="bi bi-person me-2"></i>Full Name</h5>
                        <p id="displayFullName">--</p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="preference-item">
                        <h5><i class="bi bi-calendar me-2"></i>Age</h5>
                        <p id="displayAge">--</p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="preference-item">
                        <h5><i class="bi bi-gender-ambiguous me-2"></i>Gender</h5>
                        <p id="displayGender">--</p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="preference-item">
                        <h5><i class="bi bi-telephone me-2"></i>Contact</h5>
                        <p id="displayContact">--</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Medical Information -->
        <div class="profile-card">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h3 class="section-title mb-0">
                    <i class="bi bi-heart-pulse"></i> Medical Information
                </h3>
                <button class="btn btn-edit" onclick="editMedicalInfo()">
                    <i class="bi bi-pencil me-2"></i>Edit
                </button>
            </div>
            <div class="preference-item">
                <h5><i class="bi bi-file-medical me-2"></i>Medical History</h5>
                <p id="displayMedicalHistory">No medical history recorded</p>
            </div>
        </div>

        <!-- AI Preferences -->
        <div class="profile-card">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h3 class="section-title mb-0">
                    <i class="bi bi-brain"></i> AI Preferences
                </h3>
                <button class="btn btn-edit" onclick="editAIPreferences()">
                    <i class="bi bi-pencil me-2"></i>Edit
                </button>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="preference-item">
                        <h5><i class="bi bi-translate me-2"></i>Preferred Language</h5>
                        <p id="displayLanguage">English</p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="preference-item">
                        <h5><i class="bi bi-chat-dots me-2"></i>Response Style</h5>
                        <p id="displayResponseStyle">Detailed and empathetic</p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="preference-item">
                        <h5><i class="bi bi-clock me-2"></i>Reminder Frequency</h5>
                        <p id="displayReminders">Daily health tips</p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="preference-item">
                        <h5><i class="bi bi-shield-check me-2"></i>Privacy Default</h5>
                        <p id="displayPrivacy">Merged (visible to doctors)</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Health Goals -->
        <div class="profile-card">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h3 class="section-title mb-0">
                    <i class="bi bi-bullseye"></i> Health Goals
                </h3>
                <button class="btn btn-edit" onclick="editHealthGoals()">
                    <i class="bi bi-plus-circle me-2"></i>Add Goal
                </button>
            </div>
            <div id="healthGoalsList">
                <p class="text-muted">No health goals set. Click "Add Goal" to create one.</p>
            </div>
        </div>
    </div>

    <!-- Edit Personal Info Modal -->
    <div class="modal fade" id="editPersonalModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Edit Personal Information</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Full Name</label>
                        <input type="text" class="form-control" id="editFullName">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Age</label>
                        <input type="number" class="form-control" id="editAge" min="1" max="120">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Gender</label>
                        <select class="form-select" id="editGender">
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                            <option value="prefer-not-to-say">Prefer not to say</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Contact Number</label>
                        <input type="tel" class="form-control" id="editContact">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="savePersonalInfo()">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Medical Info Modal -->
    <div class="modal fade" id="editMedicalModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Edit Medical Information</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Medical History</label>
                        <textarea class="form-control" id="editMedicalHistory" rows="5" placeholder="Include any chronic conditions, allergies, medications, past surgeries, etc."></textarea>
                        <div class="form-text">This information is encrypted and only visible to you, your doctors, and the AI for personalized care.</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="saveMedicalInfo()">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit AI Preferences Modal -->
    <div class="modal fade" id="editAIModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Edit AI Preferences</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Preferred Language</label>
                        <select class="form-select" id="editLanguage">
                            <option value="en">English</option>
                            <option value="es">Spanish</option>
                            <option value="fr">French</option>
                            <option value="sw">Swahili</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Response Style</label>
                        <select class="form-select" id="editResponseStyle">
                            <option value="detailed">Detailed and empathetic</option>
                            <option value="concise">Brief and to the point</option>
                            <option value="technical">Technical and medical</option>
                            <option value="simple">Simple and easy to understand</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Health Tips & Reminders</label>
                        <select class="form-select" id="editReminders">
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="none">None</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Privacy Default</label>
                        <select class="form-select" id="editPrivacy">
                            <option value="merged">Merged (visible to doctors)</option>
                            <option value="private">Private (hidden from doctors)</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="saveAIPreferences()">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Health Goals Modal -->
    <div class="modal fade" id="editGoalsModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add Health Goal</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Goal Title</label>
                        <input type="text" class="form-control" id="goalTitle" placeholder="e.g., Lose 10 pounds">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Description</label>
                        <textarea class="form-control" id="goalDescription" rows="3" placeholder="Describe your goal and any specific targets"></textarea>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Target Date</label>
                        <input type="date" class="form-control" id="goalDate">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="saveHealthGoal()">Add Goal</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let currentProfile = {};
        let healthGoals = [];

        // Alert helper functions
        function showSuccessAlert(message) {
            showAlert(message, 'success');
        }

        function showErrorAlert(message) {
            showAlert(message, 'danger');
        }

        function showAlert(message, type) {
            const container = document.getElementById('alertContainer');
            const alertId = 'alert-' + Date.now();
            const alertHTML = `
                <div id="${alertId}" class="alert alert-${type} alert-dismissible fade show" role="alert">
                    <i class="bi bi-${type === 'success' ? 'check-circle' : 'exclamation-triangle'} me-2"></i>
                    ${message}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', alertHTML);
            
            // Auto-dismiss after 5 seconds
            setTimeout(() => {
                const alert = document.getElementById(alertId);
                if (alert) {
                    const bsAlert = bootstrap.Alert.getInstance(alert) || new bootstrap.Alert(alert);
                    bsAlert.close();
                }
            }, 5000);
        }

        // Load profile on page load
        document.addEventListener('DOMContentLoaded', async () => {
            await loadProfile();
            await loadPreferences();
            await loadHealthGoals();
            await loadStats();
        });

        async function loadProfile() {
            const token = sessionStorage.getItem('jwt_token_patient') || sessionStorage.getItem('jwt_token');
            if (!token) {
                alert('Please login to view your profile');
                window.location.href = '/auth';
                return;
            }

            try {
                const resp = await fetch('/profile', {
                    headers: { 'Authorization': 'Bearer ' + token }
                });
                if (!resp.ok) throw new Error('Failed to load profile');
                
                const data = await resp.json();
                currentProfile = data;

                // Update profile header
                const name = data.full_name || data.username || 'User';
                document.getElementById('profileName').textContent = name;
                document.getElementById('profileAvatar').textContent = name.charAt(0).toUpperCase();
                document.getElementById('profileDetails').textContent = `${data.age || '--'} years old â€¢ ${data.gender || 'Not specified'}`;

                // Update personal info
                document.getElementById('displayFullName').textContent = data.full_name || '--';
                document.getElementById('displayAge').textContent = data.age || '--';
                document.getElementById('displayGender').textContent = data.gender || '--';
                document.getElementById('displayContact').textContent = data.contact || '--';
                document.getElementById('displayMedicalHistory').textContent = data.medical_history || 'No medical history recorded';

            } catch (err) {
                console.error('Error loading profile:', err);
                alert('Error loading profile data');
            }
        }

        async function loadPreferences() {
            // Load from localStorage (can be extended to server-side storage)
            const prefs = JSON.parse(localStorage.getItem('ai_preferences') || '{}');
            
            document.getElementById('displayLanguage').textContent = prefs.language || 'English';
            document.getElementById('displayResponseStyle').textContent = prefs.responseStyle || 'Detailed and empathetic';
            document.getElementById('displayReminders').textContent = prefs.reminders || 'Daily health tips';
            document.getElementById('displayPrivacy').textContent = prefs.privacy === 'private' ? 'Private (hidden from doctors)' : 'Merged (visible to doctors)';
        }

        async function loadHealthGoals() {
            healthGoals = JSON.parse(localStorage.getItem('health_goals') || '[]');
            renderHealthGoals();
        }

        function renderHealthGoals() {
            const container = document.getElementById('healthGoalsList');
            if (healthGoals.length === 0) {
                container.innerHTML = '<p class="text-muted">No health goals set. Click "Add Goal" to create one.</p>';
                return;
            }

            container.innerHTML = healthGoals.map((goal, idx) => `
                <div class="preference-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <div class="flex-grow-1">
                            <h5><i class="bi bi-flag me-2"></i>${goal.title}</h5>
                            <p>${goal.description}</p>
                            ${goal.targetDate ? `<small class="text-muted"><i class="bi bi-calendar me-1"></i>Target: ${goal.targetDate}</small>` : ''}
                        </div>
                        <button class="btn btn-sm btn-outline-danger" onclick="deleteGoal(${idx})">
                            <i class="bi bi-trash"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        async function loadStats() {
            const token = sessionStorage.getItem('jwt_token_patient') || sessionStorage.getItem('jwt_token');
            if (!token) return;

            try {
                const resp = await fetch('/my_sessions', {
                    headers: { 'Authorization': 'Bearer ' + token }
                });
                if (resp.ok) {
                    const data = await resp.json();
                    document.getElementById('totalSessions').textContent = data.sessions?.length || 0;
                    
                    if (data.sessions && data.sessions.length > 0) {
                        const lastSession = data.sessions[0];
                        const lastDate = new Date(lastSession.created_at);
                        const today = new Date();
                        const diffDays = Math.floor((today - lastDate) / (1000 * 60 * 60 * 24));
                        document.getElementById('lastActive').textContent = diffDays === 0 ? 'Today' : `${diffDays}d ago`;
                    }
                }

                // Account age from profile
                if (currentProfile.created_at) {
                    const created = new Date(currentProfile.created_at);
                    const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
                    document.getElementById('accountAge').textContent = `${monthNames[created.getMonth()]} ${created.getFullYear()}`;
                }
            } catch (err) {
                console.error('Error loading stats:', err);
            }
        }

        function editPersonalInfo() {
            document.getElementById('editFullName').value = currentProfile.full_name || '';
            document.getElementById('editAge').value = currentProfile.age || '';
            document.getElementById('editGender').value = currentProfile.gender || '';
            document.getElementById('editContact').value = currentProfile.contact || '';
            new bootstrap.Modal(document.getElementById('editPersonalModal')).show();
        }

        async function savePersonalInfo() {
            const token = sessionStorage.getItem('jwt_token_patient') || sessionStorage.getItem('jwt_token');
            const data = {
                full_name: document.getElementById('editFullName').value,
                age: document.getElementById('editAge').value,
                gender: document.getElementById('editGender').value,
                contact: document.getElementById('editContact').value,
                medical_history: currentProfile.medical_history || ''
            };

            try {
                const resp = await fetch('/profile', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + token
                    },
                    body: JSON.stringify(data)
                });

                if (resp.ok) {
                    const modal = bootstrap.Modal.getInstance(document.getElementById('editPersonalModal'));
                    if (modal) modal.hide();
                    await loadProfile();
                    showSuccessAlert('Profile updated successfully!');
                } else {
                    const error = await resp.text();
                    showErrorAlert('Error updating profile: ' + error);
                }
            } catch (err) {
                console.error('Error saving:', err);
                showErrorAlert('Network error: ' + err.message);
            }
        }

        function editMedicalInfo() {
            document.getElementById('editMedicalHistory').value = currentProfile.medical_history || '';
            new bootstrap.Modal(document.getElementById('editMedicalModal')).show();
        }

        async function saveMedicalInfo() {
            const token = sessionStorage.getItem('jwt_token_patient') || sessionStorage.getItem('jwt_token');
            const data = {
                full_name: currentProfile.full_name || '',
                age: currentProfile.age || '',
                gender: currentProfile.gender || '',
                contact: currentProfile.contact || '',
                medical_history: document.getElementById('editMedicalHistory').value
            };

            try {
                const resp = await fetch('/profile', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + token
                    },
                    body: JSON.stringify(data)
                });

                if (resp.ok) {
                    const modal = bootstrap.Modal.getInstance(document.getElementById('editMedicalModal'));
                    if (modal) modal.hide();
                    await loadProfile();
                    showSuccessAlert('Medical information updated successfully!');
                } else {
                    const error = await resp.text();
                    showErrorAlert('Error updating medical information: ' + error);
                }
            } catch (err) {
                console.error('Error saving:', err);
                showErrorAlert('Network error: ' + err.message);
            }
        }

        function editAIPreferences() {
            const prefs = JSON.parse(localStorage.getItem('ai_preferences') || '{}');
            document.getElementById('editLanguage').value = prefs.language || 'en';
            document.getElementById('editResponseStyle').value = prefs.responseStyle || 'detailed';
            document.getElementById('editReminders').value = prefs.reminders || 'daily';
            document.getElementById('editPrivacy').value = prefs.privacy || 'merged';
            new bootstrap.Modal(document.getElementById('editAIModal')).show();
        }

        function saveAIPreferences() {
            const prefs = {
                language: document.getElementById('editLanguage').value,
                responseStyle: document.getElementById('editResponseStyle').value,
                reminders: document.getElementById('editReminders').value,
                privacy: document.getElementById('editPrivacy').value
            };

            localStorage.setItem('ai_preferences', JSON.stringify(prefs));
            const modal = bootstrap.Modal.getInstance(document.getElementById('editAIModal'));
            if (modal) modal.hide();
            loadPreferences();
            showSuccessAlert('AI preferences saved successfully!');
        }

        function editHealthGoals() {
            document.getElementById('goalTitle').value = '';
            document.getElementById('goalDescription').value = '';
            document.getElementById('goalDate').value = '';
            new bootstrap.Modal(document.getElementById('editGoalsModal')).show();
        }

        function saveHealthGoal() {
            const goal = {
                title: document.getElementById('goalTitle').value,
                description: document.getElementById('goalDescription').value,
                targetDate: document.getElementById('goalDate').value,
                created: new Date().toISOString()
            };

            if (!goal.title) {
                showErrorAlert('Please enter a goal title');
                return;
            }

            healthGoals.push(goal);
            localStorage.setItem('health_goals', JSON.stringify(healthGoals));
            const modal = bootstrap.Modal.getInstance(document.getElementById('editGoalsModal'));
            if (modal) modal.hide();
            renderHealthGoals();
            showSuccessAlert('Health goal added successfully!');
        }

        function deleteGoal(index) {
            if (confirm('Are you sure you want to delete this goal?')) {
                healthGoals.splice(index, 1);
                localStorage.setItem('health_goals', JSON.stringify(healthGoals));
                renderHealthGoals();
                showSuccessAlert('Goal deleted successfully!');
            }
        }
    </script>
</body>
</html>

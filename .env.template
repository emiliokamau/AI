# Medical AI Assistant - Production Environment Variables Template
# 
# IMPORTANT: This is a TEMPLATE. Copy to .env and populate with REAL values.
# NEVER commit the actual .env file to version control.
# Store secrets in a vault (AWS Secrets Manager, HashiCorp Vault, Azure Key Vault)
#
# Usage in production:
#   1. Copy this file: cp .env.template .env
#   2. Fill in actual values: nano .env
#   3. Load before running: source .env
#   4. Or pass via: gunicorn --env-file=.env app:app
#
# Permissions: chmod 600 .env (read/write by owner only)

# ============================================================================
# Flask Configuration
# ============================================================================
# Set to 'production' for production deployment
FLASK_ENV=production

# Disable debug mode in production (CRITICAL)
FLASK_DEBUG=0

# Secret key for Flask sessions (generate with: python -c "import os; print(os.urandom(32).hex())")
# MUST be at least 32 characters, random, and different from JWT_SECRET
SECRET_KEY=your-very-long-random-secret-key-at-least-32-characters-generated-with-urandom

# ============================================================================
# Authentication & JWT
# ============================================================================
# JWT secret (generate with: python -c "import os; print(os.urandom(32).hex())")
# MUST be at least 32 characters and cryptographically random
JWT_SECRET=your-jwt-secret-at-least-32-characters-random-and-secure

# ============================================================================
# Database Configuration
# ============================================================================
# MySQL connection string
# Format: mysql://username:password@hostname:port/database_name
DATABASE_URL=mysql://medical_user:secure_password@prod-db.example.com:3306/medical_ai_db

# ============================================================================
# Server Configuration
# ============================================================================
# Port to listen on
PORT=5000

# Binding address
BIND_HOST=0.0.0.0

# CORS origins (comma-separated, no spaces after commas)
# Example: https://yourdomain.com,https://www.yourdomain.com,https://app.yourdomain.com
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# ============================================================================
# SSL/TLS Certificate Configuration
# ============================================================================
# Path to SSL certificate file (fullchain.pem from Let's Encrypt)
SSL_CERT_PATH=/etc/letsencrypt/live/yourdomain.com/fullchain.pem

# Path to SSL private key file
SSL_KEY_PATH=/etc/letsencrypt/live/yourdomain.com/privkey.pem

# Optional: Path to CA bundle for client certificate verification
SSL_CA_PATH=/etc/letsencrypt/live/yourdomain.com/chain.pem

# ============================================================================
# Gunicorn/WSGI Server Configuration
# ============================================================================
# Number of worker processes (recommended: CPU_cores * 2 + 1)
WORKERS=9

# Worker class: 'sync', 'async', 'gevent', 'tornado'
WORKER_CLASS=sync

# Worker timeout in seconds (should be longer than longest request)
WORKER_TIMEOUT=120

# Maximum requests per worker before restart (prevents memory leaks)
MAX_REQUESTS=1000

# Binding format (host:port)
BIND=0.0.0.0:5000

# Log level: debug, info, warning, error, critical
LOG_LEVEL=info

# ============================================================================
# Google Gemini AI Configuration
# ============================================================================
# Get from: https://aistudio.google.com/app/apikeys
GEMINI_API_KEY=your-gemini-api-key-from-google-ai-studio

# ============================================================================
# Email Notification Configuration
# ============================================================================
# Option A: SendGrid API
SENDGRID_API_KEY=SG.your-sendgrid-api-key-from-sendgrid-dashboard

# Option B: SMTP Email Server
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-specific-password
SMTP_FROM_EMAIL=noreply@yourdomain.com
SMTP_FROM_NAME=Medical AI Assistant

# ============================================================================
# SMS Notification Configuration (Daraja - Safaricom)
# ============================================================================
# Enable Daraja SMS: 1 for yes, 0 for no
ENABLE_DARAJA_SMS=1

# Daraja consumer key (get from Safaricom Daraja portal)
DARAJA_CONSUMER_KEY=your-daraja-consumer-key

# Daraja consumer secret
DARAJA_CONSUMER_SECRET=your-daraja-consumer-secret

# Daraja shortcode for sending SMS
DARAJA_SHORTCODE=500500

# Daraja initiator password for C2B/B2C operations
DARAJA_INITIATOR_PASSWORD=your-initiator-password

# ============================================================================
# Medical Data Encryption
# ============================================================================
# Fernet encryption key for sensitive medical data (generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())")
# Store securely in vault, not in .env in production
MEDICAL_HISTORY_KEY=your-base64-fernet-key-from-fernet.generate_key()

# ============================================================================
# External APIs & Integrations
# ============================================================================
# Google Maps API Key (for hospital location finder)
GOOGLE_MAPS_API_KEY=your-google-maps-api-key

# ICD-10/SNOMED CT API endpoints (customize for your medical code provider)
ICD10_API_URL=https://api.example.com/icd10
ICD10_API_KEY=your-icd10-api-key

SNOMED_API_URL=https://api.example.com/snomed
SNOMED_API_KEY=your-snomed-api-key

# ============================================================================
# Logging & Monitoring
# ============================================================================
# CloudWatch (AWS)
AWS_REGION=us-east-1
CLOUDWATCH_LOG_GROUP=medical-ai-prod
CLOUDWATCH_LOG_STREAM=app

# Sentry Error Tracking (optional)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ============================================================================
# Feature Flags & Configuration
# ============================================================================
# Enable/disable features
ENABLE_MEDICATION_REMINDERS=1
ENABLE_PREDICTIVE_ALERTS=1
ENABLE_DOCTOR_DASHBOARD=1
ENABLE_AUDIT_LOGGING=1

# Notification quiet hours (24-hour format)
QUIET_HOURS_START=22
QUIET_HOURS_END=07

# Default timezone for users without preference
DEFAULT_TIMEZONE=Africa/Nairobi

# ============================================================================
# Development/Staging Only
# ============================================================================
# These should NOT be set in production
# DEV_API_KEY=your-dev-api-key-for-testing-only
# TEST_MODE=0

# ============================================================================
# Security Notes
# ============================================================================
# 1. Generate random secrets with: python -c "import os, binascii; print(binascii.hexlify(os.urandom(32)).decode())"
# 2. Store this file securely: chmod 600 .env
# 3. Never commit to git: add ".env" and ".env.prod" to .gitignore
# 4. In production, use environment variable management tools:
#    - AWS: Systems Manager Parameter Store or Secrets Manager
#    - Azure: Key Vault
#    - GCP: Secret Manager
#    - On-premise: HashiCorp Vault, Sealed Secrets (Kubernetes)
# 5. Rotate API keys and secrets regularly (e.g., monthly)
# 6. Enable audit logging for all secret access
# 7. Use strong passwords for database and email accounts
# 8. Keep SSL certificates updated and monitor expiration

